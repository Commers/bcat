#!/usr/bin/env ruby
# Usage: bcat [<file>]...
# Concatenate <file>s, or standard input, to browser.
require 'bcat'

bcat = Bcat.new
bcat.serve! do |sock|
  fork do
    sock.close
    $stdin.close
    $stdout.close
    exec "open http://#{bcat[:Host]}:#{bcat[:Port]}/#{File.basename(Dir.pwd)}"
  end
end
